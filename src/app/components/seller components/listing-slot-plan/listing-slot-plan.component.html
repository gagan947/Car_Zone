<section class="ct_py_70">
      <div class="container">
            <div class="row">
                  @if(planList){
                  <div class="col-md-8 mx-auto">
                        <div class="ct_light_red_bg">
                              <div class="d-flex align-items-center justify-content-between gap-2 flex-wrap mb-3">
                                    <h5 class="ct_fs_20 ct_fw_600 mb-0">{{planList.total_slots}} {{'TotalSlots' | translate}}</h5>
                                    @if(planList.is_active){
                                    <span class="ct_green_text ct_fw_600">{{'Active' | translate}}</span>
                                    }
                              </div>
                              <div class="progress ct_custom_progress_bar">
                                    <div class="progress-bar" role="progressbar"
                                          [style.width.%]="(convert(planList.cars_listed, 'used') / convert(planList.cars_listed, 'total')) * 100"
                                          [attr.aria-valuenow]="convert(planList.cars_listed, 'used')"
                                          [attr.aria-valuemin]="0"
                                          [attr.aria-valuemax]="convert(planList.cars_listed, 'total')">
                                    </div>
                              </div>
                              <div class="d-flex align-items-center justify-content-between gap-2 flex-wrap mb-3 mt-1">
                                    <p class="mb-0">{{convert(planList.cars_listed, 'used')}} {{'Used' | translate}}</p>
                                    <p class="mb-0">
                                          {{(convert(planList.cars_listed, 'total') - convert(planList.cars_listed, 'used'))}}
                                          {{'Available' | translate}}
                                    </p>

                              </div>
                              <ul class="ct_plan_detail_list mt-2">
                                    <li>
                                          <p class="mb-0">{{'ValidTill' | translate}}</p>
                                          <p class="mb-0 ct_fw_600">{{planList.end_date | date: 'MMM yyyy'}}</p>
                                    </li>
                                    <li>
                                          <p class="mb-0">{{'CarsListed' | translate}}</p>
                                          <p class="mb-0 ct_fw_600">{{planList.cars_listed}}</p>
                                    </li>
                                    <li>
                                          <p class="mb-0">{{'CarsSwapped' | translate}}</p>
                                          <p class="mb-0 ct_fw_600">{{planList.cars_swapped}} this month</p>
                                    </li>
                                    <li>
                                          <p class="mb-0">{{'DaysLeft' | translate}}</p>
                                          <p class="mb-0 ct_fw_600">{{planList.days_left}} days</p>
                                    </li>
                              </ul>
                        </div>

                        <div class="mt-4">
                              <ul class="ct_plan_detail_list">
                                    @for (item of planList.history.reverse(); track $index) {
                                    <li>
                                          <div
                                                class="d-flex align-items-star justify-content-between gap-2 w-100 ct_outline_bg">
                                                <div>
                                                      <p class="ct_fs_16 ct_fw_600 mb-0">{{item.purchased_slots}} Slot
                                                      </p>
                                                      <p class="ct_fs_16 ct_fw_600 mb-0 text-capitalize">Type :
                                                            {{item.purchase_type}}
                                                      </p>
                                                      <p class="ct_fs_16 ct_text_op_6 mb-0">
                                                            {{item.start_date | date:'MMM yyy'}} -
                                                            {{item.end_date | date:'MMM yyy'}}
                                                      </p>
                                                </div>
                                                <div>
                                                      <p class="mb-0 ct_text_red ct_fs_16 ct_fw_600">
                                                            {{item.prorated_price}}.-CHF/month
                                                      </p>
                                                </div>
                                          </div>
                                    </li>
                                    }
                              </ul>
                        </div>
                  </div>
                  }@else {
                  <div class="d-flex flex-column align-items-center justify-content-center text-center bg-white rounded-4 shadow-sm p-5 position-relative overflow-hidden"
                        style="min-height: 65vh;">

                        <div class="position-absolute top-0 start-0 w-100 h-100"
                              style="background: radial-gradient(circle at top, rgba(220,53,69,0.05), transparent); z-index:0;">
                        </div>

                        <div class="d-flex align-items-center justify-content-center rounded-circle mb-4 position-relative"
                              style="width: 120px; height: 120px; background: linear-gradient(135deg, #ffccd1, #fff); z-index:1;">
                              <i class="bi bi-heart text-danger fs-1"></i>
                              <span
                                    class="position-absolute top-0 start-0 w-100 h-100 rounded-circle border border-3 border-danger opacity-25"></span>
                        </div>

                        <h4 class="fw-semibold text-dark mb-2">{{'NoActivePlan' | translate}}</h4>
                        <p class="text-muted mb-4">
                              {{'NoActivePlanDescription' | translate}}
                        </p>
                        <button class="ct_red_btn text-center" type="button" routerLink="/choose-listing-plan">
                              <i class="bi bi-arrow-left me-2"></i>{{'PurchaseAndStartListing' | translate}}
                        </button>
                  </div>
                  }
            </div>
      </div>
</section>